image: eu.gcr.io/ligatus-prod-public-registry/generic-build-agent:latest

stages:
  - build
  
variables:
  VENDOR_PATH: "/go/src/github.com/influxdata"
  PROJECT_NAME: "telegraf"
  TARGET_DIR: "pinot-distribution/target/pinot-*-pkg"
  ARTIFACT_DIR: "artifact"

build:
  stage: build
  script:
  - mvn clean package -Dlicense.skip=true -DskipTests -Pbuild-shaded-jar
  - mkdir ${ARTIFACT_DIR}
  - cp -r ${TARGET_DIR}/bin ${TARGET_DIR}/conf ${TARGET_DIR}/lib ${ARTIFACT_DIR}/
  
  artifacts:
    paths:
      - ${ARTIFACT_DIR}
